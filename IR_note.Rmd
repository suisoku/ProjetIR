---
title: "Text Mining of Assemblé Generale Documents"
author: "ZIANI,MASSELIN,DIALLO,ANZID"
date: "March 29, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(rvest)
library(xml2)
# Extraction de la page html d'une séance unique (123eme) du 22/02/2017
textTreeBase <- read_html("http://www.assemblee-nationale.fr/14/cri/2016-2017/20170123.asp")

```


```{r}
library(stringi)
# Extraction 
textSeance20170123<- textTreeBase %>% html_nodes("body") %>% html_nodes("p") %>% html_text() #extraction dans le noeud <body> puis dnas le noeud <p>


library(dplyr)
# Création d'un object Data
text_seance20170123 <- tibble(line = 1:length(textSeance20170123), text = textSeance20170123)

# utilisation des regex pour désigner les hommes et les femmes
sexeM <- c("M\\. ")
sexeF <- c("Mme ")

#On ne garde que les discour des hommes et femmes dicriminer par leur sexe
text_seance20170123 <- text_seance20170123 %>%
  rowwise() %>% 
  mutate(sexe = if(str_detect(text, sexeM))1 else if(str_detect(text, sexeF)) 0 else 2) %>% 
  filter(sexe < 2)
```
